---
permalink: ilm/example-4-ilm-rules-and-policy-for-s3-versioned-objects.html 
sidebar: sidebar 
keywords: object versions, example ILM rule, information lifecycle rule examples 
summary: 버전 관리가 활성화된 S3 버킷을 사용하는 경우 비현재 시간을 참조 시간으로 사용하는 ILM 정책에 규칙을 포함하여 비최신 오브젝트 버전을 관리할 수 있습니다. 
---
= 예 4: S3 버전 오브젝트에 대한 ILM 규칙 및 정책
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
버전 관리가 활성화된 S3 버킷을 사용하는 경우 * 비현재 시간 * 을 참조 시간으로 사용하는 ILM 정책에 규칙을 포함하여 비최신 오브젝트 버전을 관리할 수 있습니다.

이 예제에서 볼 수 있듯이 버전이 아닌 개체 버전에 대해 다른 배치 명령을 사용하여 버전이 지정된 개체에서 사용하는 스토리지의 양을 제어할 수 있습니다.


CAUTION: 다음 ILM 규칙 및 정책은 예일 뿐입니다. ILM 규칙을 구성하는 방법은 여러 가지가 있습니다. 새 정책을 활성화하기 전에 제안된 정책을 시뮬레이션하여 콘텐츠가 손실로부터 보호되도록 의도한 대로 동작하는지 확인합니다.


NOTE: ILM 정책을 생성하여 비최신 개체 버전을 관리하는 경우 정책을 시뮬레이션하려면 개체 버전의 UUID 또는 CBID를 알고 있어야 합니다. 개체의 UUID 및 CBID를 찾으려면 개체가 현재 상태일 때 개체 메타데이터 조회를 사용합니다. 을 참조하십시오 xref:verifying-ilm-policy-with-object-metadata-lookup.adoc[개체 메타데이터 조회를 통해 ILM 정책을 확인합니다].

.관련 정보
* xref:how-objects-are-deleted.adoc[오브젝트 삭제 방법]




== 예를 들어 ILM 규칙 1: 10년 동안 복사본 3개를 저장합니다

이 ILM 규칙은 10년 동안 3개의 데이터 센터에 각 개체의 복사본을 저장합니다.

이 규칙은 버전 적용 여부에 관계없이 모든 개체에 적용됩니다.

[cols="1a,2a"]
|===
| 규칙 정의 | 예제 값 


 a| 
스토리지 풀
 a| 
각각 서로 다른 데이터 센터에 있는 세 개의 스토리지 풀(DC1, DC2 및 DC3)입니다.



 a| 
규칙 이름
 a| 
10년 동안 3부



 a| 
참조 시간
 a| 
수집 시간



 a| 
콘텐츠 배치
 a| 
0일째, 복제된 복사본 3개를 10년(3,652일), DC1에 1개, DC2에 1개, DC3에 1개씩 보관합니다. 10년이 끝나면 개체의 복사본을 모두 삭제합니다.

|===
image::../media/ilm_rule_1_example_4.png[예를 들어 ILM 규칙 1: 5년 동안 복사본 3개를 저장합니다]



== 예를 들어 ILM 규칙 2: 2년 동안 비최신 버전의 복사본 2개를 저장합니다

이 ILM 규칙 예에서는 2년 동안 S3 버전 오브젝트에서 2개의 복사본을 저장합니다.

ILM 규칙 1은 개체의 모든 버전에 적용되므로 다른 규칙을 만들어 현재 버전이 아닌 버전을 필터링해야 합니다. 이 규칙은 참조 시간에 * 비현재 시간 * 옵션을 사용합니다.

이 예제에서는 비최신 버전의 복사본 두 개만 저장되고 이 복사본은 2년 동안 저장됩니다.

[cols="1a,2a"]
|===
| 규칙 정의 | 예제 값 


 a| 
스토리지 풀
 a| 
각각 서로 다른 데이터 센터에 있는 두 개의 스토리지 풀(DC1 및 DC2)입니다.



 a| 
규칙 이름
 a| 
비최신 버전: 2부 2년



 a| 
참조 시간
 a| 
현재 시간이 아닙니다



 a| 
콘텐츠 배치
 a| 
현재 시간이 아닌 경우(즉, 개체 버전이 최신 버전이 아닌 버전이 되는 날부터 시작)에 대해 0일째 되는 경우, 2년(730일) 동안 DC1과 DC2에 있는 2개의 비현재 개체 버전의 복제된 복사본을 유지합니다. 2년이 끝나면 최신 버전이 아닌 버전을 삭제합니다.

|===
image::../media/ilm_rule_2_example_4.png[예 4 ILM 규칙 2: 2년 동안 비최신 개체 버전 유지]



== ILM 정책(예: 4:S3 버전 오브젝트

개체의 이전 버전을 현재 버전과 다르게 관리하려면 현재 개체 버전에 적용되는 규칙 전에 참조 시간으로 * 비현재 시간 * 을 사용하는 규칙이 ILM 정책에 나타나야 합니다.

S3 버전 개체에 대한 ILM 정책에는 다음과 같은 ILM 규칙이 포함될 수 있습니다.

* 버전이 최신 버전이 아닌 날부터 시작하여 각 개체의 이전(비최신) 버전을 2년 동안 유지합니다.
+

NOTE: 현재 개체 버전에 적용되는 규칙 앞의 정책에 현재 시간 이외의 규칙이 표시되어야 합니다. 그렇지 않으면 현재 개체 버전이 아닌 시간 규칙과 일치하지 않습니다.

* 수집 시 3개의 복제 복사본을 생성하고 3개 데이터 센터 각각에 하나의 복사본을 저장합니다. 10년 동안 현재 개체 버전의 복사본을 유지합니다.


image::../media/ilm_policy_example_4.png[예 4의 ILM 정책]

예제 정책을 시뮬레이션할 때 테스트 개체는 다음과 같이 평가됩니다.

* 최신 버전이 아닌 개체 버전은 첫 번째 규칙에 따라 일치됩니다. 최신 버전이 아닌 개체 버전이 2년 이상이면 ILM을 통해 영구적으로 삭제됩니다(비최신 버전의 모든 복사본이 그리드에서 제거됨).
+

NOTE: 최신 버전이 아닌 개체 버전을 시뮬레이션하려면 해당 버전의 UUID 또는 CBID를 사용해야 합니다. 객체가 아직 남아 있는 동안 객체 메타데이터 조회를 사용하여 해당 UUID 및 CBID를 찾을 수 있습니다.

* 현재 개체 버전은 두 번째 규칙에 따라 일치됩니다. 현재 개체 버전이 10년 동안 저장된 경우 ILM 프로세스는 삭제 마커를 개체의 현재 버전으로 추가하고 이전 개체 버전을 ""비현재""로 만듭니다. 다음 번에 ILM 평가를 수행할 때 이 비최신 버전은 첫 번째 규칙에 따라 일치합니다. 따라서 DC3에서 복제본이 제거되고 DC1과 DC2에서 두 개의 복제본이 2년 더 저장됩니다.

